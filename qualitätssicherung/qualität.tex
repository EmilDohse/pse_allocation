%%This is a very basic article template.
%%There is just one section and two subsections.
\documentclass[parskip=full]{scrartcl}
\usepackage[table]{xcolor}

\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{mathtools}
\usepackage{studarbeit}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{lscape}
\usepackage{rotating}
\usepackage{epstopdf}
\usepackage{pdfpages}
\usepackage{caption, booktabs}
\usepackage{tabularx}
\usepackage{multirow}
\usepackage{here}
\usepackage[most]{tcolorbox}
\usepackage[binary-units=true]{siunitx}
 \usepackage[autostyle=true,german=quotes]{csquotes}
 \usepackage{longtable, booktabs}
 \newcommand{\swtLabel}[1]{\textbf{/#1\arabic*0/}}
 \renewcommand{\labelitemii}{~}
 %\renewcommand{\labelitemi}{~}
 \newcommand{\fehler}[4]{\textbf{#1}
 							\begin{itemize}
 							  \item \textbf{Synthom}  #2
 							  \item \textbf{Grund} #3
 							  \item \textbf{Behandlung} #4
 							\end{itemize}}
 	\newcommand{\verbesserung}[3]{\textbf{#1}
 							\begin{itemize}
 							  
 							  \item \textbf{Grund} #2
 							  \item \textbf{Behandlung} #3
 							\end{itemize}}
 							
  \newcommand{\code}[1]{{\ttfamily #1}}
 \begin{document}

\title{Elipse -- Einteilungs Interface für das PSE}
\author{D. Biester, E. Dohse, P. Faller, P. Loth, L. Seufert, S. Kopmann}
\thesistype{Testbericht}
\zweitgutachter{}
\betreuer{Dipl.-Inform.~Andreas~Zwinkau, M.Sc.~Andreas~Fried}
\coverimage{ElipseLogo.png}
\mytitlepage
{\setlength{\textheight}{297mm}
\tableofcontents

\setlength{\textheight}{297mm}}
\pagebreak

\section{Einleitung}
Nachdem in Planungs-, Entwurfs- und Implementierungsphase das Produkt
beschrieben, entworfen und implementiert wurde ist die Qualitätssicherungsphase
dazu da, das Produkt zu Testen und die Benutzbarkeit, Zuverlässigkeit, 
Sicherheit und Performanz zu verbessern. Im folgenden Dokument werden die
behobenen Fehler sowie sonstige Verbesserungen festgehalten.

\section{Behobene Fehler}
\subsection{Allgemeine Fehler}
\begin{itemize}
  \item \fehler{Verwenden des \enquote{Änderung rückgängig machen}-Knopfs nach
  der Löschung oder Veröffentlichern einer Einteilung }{Wenn die folgenden
  Aktionen durchgeführt wurden kam es zu einer \code{null}-Pointer-Exception:
\begin{enumerate}
  \item Bearbeiten einer Einteilung
  \item Löschen der Einteilung
  \item Klicken auf \enquote{Änderung rückgängig machen}
\end{enumerate}}{Bei der Löschung der berechneten Einteilung werden die
Änderungen an dieser Einteilung nicht gelöscht.}{Nun wird überprüft ob die
Eiteilung gelöscht wurde.}
\item \fehler{Annotation der Date-Objekte in der Datenbank }{In der %TODO stimmt
% das so?
Testdatenbank funktionierten die Deadlines nicht. }{Die Date-Objekte waren
nur als TIME annotiert und hatten deswegen kein Datum sondern nur eien Zeit.
Das Datum wird jedoch zur umsetzung der Deadlines benötigt.}{Nun sind
Date-Objekte mit TIMESTAMP annotiert und speichern damit auch das Datum.}
\item \fehler{Anzeige von Fehlermeldungen durch Deadlines auf der
%TODO stimmt das so?
Indexseite}{Wenn man versuchte eine in dem Moment durch Deadlines verbotene
Aktion durchzuführen, wie zum Beispiel das Registrieren eines Strudenten
außerhalb des Registrierungszeitraums, wurden keine Fehlermeldungen
angezeigt}{Der Redirect-Pfad auf die Indexseite war nicht auf der White-List
unseres Security-Filters. Deswegen konnte der Cooky in dem die Fehlermeldung 
mitgegebene wird nicht übergeben werden. }{Die Indexseite wurde nun zur
Whitelist des Security-Filters hinzugefügt.}
\item \fehler{Projekt als Betreuer andere Betreuer hinzufügen/entfernen}{Wenn
man als Betreuer ein Projekt bearbeitet hat, Betreuer hinzufügt oder entfernt
hat und gespeichert hat wurden die Änderungen nicht übernommen }{Im
Controller wurde von uns vergessen die Änderung an den Betreuern zu
speichern.}{Nun werden die Änderungen an den Betreuern gespeichert.}
\item \fehler{Ebean Fehler: Lerngruppen}{Wenn die folgenden Aktionen
nacheinander ausgeführt werden kam es zu einer
persistence-Exception:\begin{enumerate}
  \item Student der noch in keiner Lerngruppe ist tritt Lerngruppe bei
  \item Student verlässt Lerngruppe
\end{enumerate}}{Studenten haben in dem Produkt intern immer eine Lerngrupppe.
(d.h.
berets nach der registrierung wird ein Student mit privater Lerngrupppe
erstellt) Wenn man nun einer Lerngruppe beitritt wird diese private Lerngruppe
gelöscht. Wenn man dann wieder aus der Lerngruppe austritt wird eine neue
private Lernguppe erstellt und es wird versucht dieser beizutreten. Da Ebean
jedoch Cascde-Types nur manchmal beherscht passiert es, das der Student noch
eine Assozation zu der eigentlich gelöschten privaten Lerngruppe hat. Da es sich
um eine One-To-One Assozition handelt kommt es zur persistence-Exception beim
Versuch eine neue private Lerngruppe hinzuzufügen }{Wir entfernen die
Assoziation nun manuell.}
\item \fehler{Ebean Fehler: Projekte als Betreuer erstellen}{Wenn die folgenden
Aktionen nacheinander, von einem Betreuer ausgeführt wurden kam es zu einer
persistence-Exception:
\begin{enumerate}
  \item Löschen eines Projekts bei dem der Betreuer als Projektbetreuer
  eingetragen ist
  \item Erstellen eines Projekts durch den Betreuer
\end{enumerate}}{Es handelt sich wieder um ein Problem mit Cascade-Types und
Ebean. Wenn ein Projekt gelöscht wird löscht Ebean die Assoziation zum
Betreuer nicht. Beim Erstellen eines neuen Projekts duŕch den Betreuer
\enquote{bemerkt} Ebean nun das das alte Projekt nicht mehr existert und wirft
die Fehlermeldung. An sich sollte es hier sogar möglich sein, als Betreuer mehr
als einem Projekt zugeordnet zu sein (die Betreuer-Projekt Beziehung ist
One-To-Many) }{Durch das manuelle Entfernen der Assoziation Projekt-Betreuer
bei der Löschung des Projekts kommt es nun nicht mehr zu dem Fehler. }
\end{itemize}
\subsection{Concurrency}
\begin{itemize}
  \item \fehler{Projektbetreuer löschen und: Projektbetreuer zu Projekt
  hinzufügen}{Wenn der Administrator einen Projektbetreuer in einem Tab seines Browsers löscht, in einem weiteren
  Tab jedoch noch ein Projekt bearbeitet wird der Betreuer in diesem Tab
  noch angezeigt. Wenn der Betreuer zu dem Projekt hinzugefügt werden soll und
  das Projekt gespeichert wird kommt es zu einer
  \code{null}-Pointer-Exception.}{Da das andere Tab nicht neu geladen wird, wird
  der Betreuer hier noch angezeigt, existiert jedoch nicht mehr. }{In der
  Projektbearbeitung wird nun überprüft ob der Projektbetreuer gelöscht wurde
  und das Löschen und Editieren von Projekten ist synchronisiert. }
    \item \fehler{SPO löschen und: SPO exportieren/bearbeiten oder Semester
    bearbeiten }{Wenn der Administrator eine SPO in einem Tab
    seines Browsers löscht, in einem weiteren Tab jedoch noch die SPO
    exportiert/bearbeitet oder einem Semester diese SPO hinzufügt wird die SPO
    in diesem Tab noch angezeigt.
    Wenn die SPO ausgewählt und gespeichert wird kommt es zu
    einer \code{null}-Pointer-Exception.}{Da das andere Tab nicht neu geladen
    wird, wird die SPO hier noch angezeigt, existiert jedoch nicht mehr.
    }{Beim exportieren und bearbeiten von SPOs sowie der Bearbeitung von
    Semestern wird nun überprüft ob die SPO gelöscht wurde und das
    Löschen der SPO ist mit der Bearbeitung von SPO und Semester und dem Export
    der SPO synchronisiert.
    }
    \item \fehler{Studenten registrieren sich gleichzeitig}{Wenn man versucht hat
    zwei Studenten mit der selben Matrikelnummer, im selben Moment zu
    registrieren wurden teilweise beide in die Datenbank übernommen, obwohl
    überprüft wird ob die Matrikelnummer im Produkt bereits existiert.}{Es gab
    einen Wettlauf bei der Überprüfuung der Matrikelnummer. Dies konnte zu einer
    inkonsistenten Datenbank führen.}{Nun ist die Registrierung von Studenten synchronisiert}
    \item \fehler{Lerngruppe  verlassen und: der
    Lerngruppe beitreten, sie verlassen oder bewertungen für sie
    abgeben}{\begin{enumerate}
      \item Wenn das letzte Mitglied die
    Lerngruppe verlies und sie somit gelöscht wurde und  im selben Moment 
    Bewertungen für sie abzugeben wurden oder ein anderer Student versuchte ihr
    beizutreten kam es teilweise zu \code{null}-Pointer-Exceptions.
    \item Wenn die
    Lerngruppe noch zwei Mitglieder hatte und beide Mitgleider sie gleichzeitig
    verliesen, wurde die Lerngruppe zum Teil nicht gelöscht.
    \end{enumerate}  }
    {\begin{enumerate}
      \item Es gab Wettläufe: bei der Bewertung hatte der Student kurzzeitig
      keine Lerngruppe mehr, beim Beitritt einer anderen Person existierte die
      Lerngruppe noch als geprüft wurde, ob es eine Lerngruppe mit dieser Name-
      Passwort-Kombination gibt, jedoch nicht mehr als der andere Student
      beitreten wollte.
      \item Dies geschah, da bei der Überprüfung der Gruppengröße ein
      Wettlauf entstand.
    \end{enumerate} }{Nun sind das Bewerten, der Beitritt und das Verlassen einer Lernguppe synchronisiert.}
    \item \fehler{Projekt löschen und: das Projekt bearbeiten oder der Beitritt
    eines Betreueres zu dem Projekt }{Wenn das Projekt in einem Tab
    gelöscht in einem anderen bearbeitet und abgespeichert wurde oder ein
    Betreuer versucht hat im selben Moment dem Projekt beizutreten kam es zu
    einer \code{null}-Pointer-Exception.
    }{Da die Tabs zur Projekt-Bearbeitung und der Projektübersicht (für den
    Beitritt eines Betreueres zu einem Projekt) nicht neu geladen werden, wird
    das bereits gelöschte Projekt immer noch angezeigt.}{Nun sind der Beitritt
    zu einem Projekt das Löschen und das Bearbeiten synchronisiert und es gibt
    überprüfungen beim Beitritt und der Bearbeitung, ob das Projekt gelöscht
    wurde}
    \item \fehler{Änderung des aktiven Semesters während der
    Einteilungsberechnung }{Wenn man das aktive Semester während der
    Berechnung einer Einteilung umgestellt wurde, wurde die Einteilung im
    nun aktiven Semester gespeichert, was dazu geführt hat das alle
    Studenten des nun aktiven Semesters in dieser Einteilung als nicht
    zugeteilt angezeigt wurden}{Die Einteilung fragt ab, was das aktuelle
    Semeser ist. Je nachdem wann dieses geändert wird, wird die Einteilung dem
    einen oder dem anderen Semester zugeordnet.}{Um diesen Fehler zu vermeiden
    kann man das aktive Semester nun nur noch umstellen, wenn die
    Einteilungswarteschlange leer ist.}
    \item \fehler{Semester löschen und bearbeiten}{Wenn man ein Semester in
    einem Tab löschte und in einem anderen bearbeitete und speicherte, kam es zu
    einer \code{null}-Pointer-Exception. }{Da das Tab zur Bearbeitung nicht
    neu geladen wird, wird hier ein nicht existentes Semester angezeitg.}{Das
    Löschen und Bearbeiten ist nun synchronisiert und bei der Bearbeitung wird
    überprüft ob das Semester gelöscht wurde.}
    \item \fehler{Berechnete Einteilung löschen und: diese Einteilung
    duplizieren, bearbeiten, veröffentlichen oder exportieren}{Wenn in
    einem Tab eine Einteilung gelöscht, in einem Anderen diese Einteilung
    dupliziert, bearbeitet, veröffentlicht oder exportiert wird kommt es zu
    einer \code{null}-Pointer-Exception. }{Da die Tabs zum duplizieren,
    bearbeiten, veröffentlichen oder exportieren nicht neu geladen werden,
    wird die Einteilung hier immer noch angezeigt, existiert jedoch nicht
    mehr.}{Das duplizieren, bearbeiten, veröffentlichen, exportieren und
    löschen von Einteilungen ist nun synchronisiert. Weiterhin wird beim
    duplizieren, bearbeiten, veröffentlichen oder exportieren der Einteilung
    überprüft ob sie gelöscht wurde.}
\end{itemize}


\section{Sonstige Verbesserungen}

\begin{itemize}
\item \verbesserung{Tabwechsel bei Einteilungs-, Semester- und
SPO-Bearbeitung}{In der Benutzeroberfläche des Administrators werden bei der
Bearbeitung von Eintelings- Semester und SPO-Daten, die jeweiligen Daten in
Tabs (Registerkarten) angezeigt. Bei der Bearbeitung wurde nach dem Speichern
immer wieder das erste Tab angezeigt. Besonsters bei der
Einteiluungsbearbeitung führte dies schnell zu Fehlern durch den Benutzer}{Nun
kommt man nach dem Speichern wieder auf das gleiche Tab}
\item \verbesserung{Änderung desaktiven Semesters nur außerhalb der
Registrierungszeit möglich}{Das Ändern des aktiven Semesters führt dazu das
die Studenten die Projekte eines anderen Semesters sehen, diese bewerten
können und Lerngruppen im \enquote{falschen} Semester gründen können. Dies
würde zu Chaos führen.}{Das aktive Semester kann nur noch außerhalb der
Registrierungszeit geändert werden.}
\item \verbesserung{GUI verschönert}{Die GUI hatte zwar funktioniert war
jedoch an einigen Stellen nicht all zu schön.}{Nun ist die GUI wundeschön.}%TODO
%ollen wir das überhaut erwähnen
\item \verbesserung{Ausssagekräftige Fehlermeldungen}{Während der
Implementierungsphase wurden einige Randfälle noch durch die Fehlermeldung
\enquote{Unerwarteter, interner Serverfehler} angezeigt, auch wenn diese
Fehler einen bekannten Grund hatten.}{Nun wird beim auftreten der Fehler (z.B.
bei fehlerhaften Eingaben) eine aussagekräftige Fehlermeldung ausgegeben. }
\end{itemize}
\section{Statistiken}
Als ein Produkt mit einer graphischen Benutzeroberfläche war es leider nicht
möglich eine hundertprozentige Codeüberdeckung, mit automatisierten Tests, zu
erreichen. Es gab bei den folgenden packages Probleme:
\begin{itemize}
  \item \textbf{\code{controllers:}} jegliche Art von Controller stellte sich
  als schwierig testbar heraus, da das mocking oft nur schwer und teilweise gar
  nicht funktionierte. So schafften wir es nicht das hoch- und herunterladen von
  Dateien im \code{AdminImportExportController} zu mocken.
  \item \textbf{\code{allocation:}} wir verwenden bei der Einteilungsberechnung
  einen heuristischen, nicht deterministischen ILP-Solver. Daher beeinflussen
  die einstellbaren Kriterien ein Ergebniss zwar stark in eine Richtung
  erzwingen es jedoch nicht. Unsere Test der Kriterien sind daher nur eine
  notwendige jedoch keine hinreichende Bedingung für die Funktion der
  Einteilungsberechnung. 
\end{itemize}


\end{document}