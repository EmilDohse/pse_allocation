// --------------------------------------------------------
// Code generated by Papyrus Java
// --------------------------------------------------------

package qualityCriteria;

import data.Allocation;
import data.GeneralData;
import data.LearningGroup;
import data.Project;
import data.Semester;
import data.Student;

/************************************************************/
/**
 * GÃ¼tekriterium, das die Anzahl der zerteilten Lerngruppen berechnet
 */
public class splitLearningGroups implements QualityCriterion {

    /**
     * {@inheritDoc}
     */
    @Override
    public String calculate(Allocation allocation) {
        int numberOfSplitLearningGroups = 0;
        Semester semester = GeneralData.getInstance().getCurrentSemester();
        for (int i = 0; i < semester.getLearningGroups().size(); i++) {
            LearningGroup lg = semester.getLearningGroups().get(i);
            Project p1 = allocation.getTeam(lg.getMembers().get(0)).getProject();
            if (!lg.isPrivate() && lg.getMembers().size() > 1) {
                boolean hasBeenDevided = false;
                for (int j = 1; (j < lg.getMembers().size()) && !hasBeenDevided; j++) {
                    Student memberJ = lg.getMembers().get(j);
                    Project memeberJProject = allocation.getTeam(memberJ).getProject();
                    if (memeberJProject != null && !memeberJProject.equals(p1)) {
                        hasBeenDevided = true;
                    }
                }
                if (hasBeenDevided) {
                    numberOfSplitLearningGroups++;
                }
            }
        }
        return String.valueOf(numberOfSplitLearningGroups);
    }

    @Override
    public String getName() {
        return "Getrennte Lerngruppen";
    }
}
